import flet as ft
from datetime import datetime
import random

# –°–ø–∏—Å–æ–∫ –∂–∞—Ä—Ç—ñ–≤
jokes = [
    "–ß–æ–º—É –ø—Ä–æ–≥—Ä–∞–º—ñ—Å—Ç–∏ –Ω–µ –ª—é–±–ª—è—Ç—å –ø—Ä–∏—Ä–æ–¥—É? ‚Äî –ë–æ —Ç–∞–º –±–∞–≥–∞—Ç–æ –±–∞–≥—ñ–≤.",
    "–Ø –± —Ä–æ–∑–ø–æ–≤—ñ–≤ —â–µ –æ–¥–∏–Ω –∂–∞—Ä—Ç –ø—Ä–æ –±–∞–≥–∏, –∞–ª–µ –≤—ñ–Ω —ñ–Ω–æ–¥—ñ –Ω–µ –ø—Ä–∞—Ü—é—î.",
    "–Ø–∫ –Ω–∞–∑–∏–≤–∞—î—Ç—å—Å—è —Ñ–æ–±—ñ—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è –∫–æ–¥—É? ‚Äî Delete-–æ–±—ñ—è."
]

# –°–ø–∏—Å–æ–∫ —Ü–∏—Ç–∞—Ç
quotes = [
    "¬´–Ñ–¥–∏–Ω–∏–π —Å–ø–æ—Å—ñ–± –∑—Ä–æ–±–∏—Ç–∏ –≤–µ–ª–∏–∫—É —Ä–æ–±–æ—Ç—É ‚Äî —Ü–µ –ª—é–±–∏—Ç–∏ —Ç–µ, —â–æ –≤–∏ —Ä–æ–±–∏—Ç–µ.¬ª ‚Äî –°—Ç—ñ–≤ –î–∂–æ–±—Å",
    "¬´–ù–∞–≤—á–∞–Ω–Ω—è ‚Äî —Ü–µ –Ω–µ –Ω–∞–ø–æ–≤–Ω–µ–Ω–Ω—è –≤—ñ–¥—Ä–∞, –∞ –∑–∞–ø–∞–ª—é–≤–∞–Ω–Ω—è –≤–æ–≥–Ω—é.¬ª ‚Äî –í—ñ–ª—å—è–º –ë–∞—Ç–ª–µ—Ä –Ñ–π—Ç—Å",
    "¬´–£—Å–ø—ñ—Ö ‚Äî —Ü–µ –Ω–µ –≤–∏–ø–∞–¥–∫–æ–≤—ñ—Å—Ç—å, –∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤–∞–∂–∫–æ—ó –ø—Ä–∞—Ü—ñ.¬ª ‚Äî –ö–æ–ª—ñ–Ω –ü–∞—É–µ–ª–ª"
]

# –í—ñ–¥–ø–æ–≤—ñ–¥—ñ –º—ñ–Ω—ñ-—á–∞—Ç-–±–æ—Ç–∞
mini_chat_responses = {
    "–ø—Ä–∏–≤—ñ—Ç": "–ü—Ä–∏–≤—ñ—Ç! –Ø–∫ –Ω–∞—Å—Ç—Ä—ñ–π? üòä",
    "—è–∫ —Å–ø—Ä–∞–≤–∏?": "–£—Å–µ —á—É–¥–æ–≤–æ! –ê –≤ —Ç–µ–±–µ? üòÑ",
    "–º–µ–Ω—ñ —Å—É–º–Ω–æ": "–ù–µ –∑–∞—Å–º—É—á—É–π—Å—è! –í—Å–µ –Ω–∞–ª–∞–≥–æ–¥–∏—Ç—å—Å—è. üíõ",
    "—Ö—Ç–æ —Ç–∏?": "–Ø ‚Äî —Ç–≤—ñ–π –∞—Å–∏—Å—Ç–µ–Ω—Ç. –ü–∏—Ç–∞–π —É—Å–µ, —â–æ —Ü—ñ–∫–∞–≤–∏—Ç—å!",
    "—â–æ —Ä–æ–±–∏—à?": "–ß–µ–∫–∞—é —Ç–≤–æ—ó—Ö –∫–æ–º–∞–Ω–¥. ü§ñ",
    "–¥—è–∫—É—é": "–ó–∞–≤–∂–¥–∏ —Ä–∞–¥–∏–π –¥–æ–ø–æ–º–æ–≥—Ç–∏! üôå",
    "–¥–æ –ø–æ–±–∞—á–µ–Ω–Ω—è": "–ë—É–≤–∞–π! –ì–∞—Ä–Ω–æ–≥–æ –¥–Ω—è! üëã"
}

# –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –¥–æ –ª–æ–≥—É
def add_to_log(message, log_panel, max_log_length, color):
    timestamp = datetime.now().strftime("[%H:%M:%S]")  # –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –º—ñ—Ç–∫–∏ —á–∞—Å—É
    log_panel.content.controls.append(ft.Text(f"{timestamp} {message}", color=color))  # –î–æ–¥–∞–≤–∞–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –¥–æ –ª–æ–≥—É
    # –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞, —á–∏ –Ω–µ –ø–µ—Ä–µ–≤–∏—â—É—î –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∏–π –ª—ñ–º—ñ—Ç
    while len(log_panel.content.controls) > max_log_length:
        log_panel.content.controls.pop(0)  # –í–∏–¥–∞–ª–µ–Ω–Ω—è –Ω–∞–π—Å—Ç–∞—Ä—ñ—à–æ–≥–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
    log_panel.update()

# –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –æ–±—Ä–æ–±–∫–∏ –∫–æ–º–∞–Ω–¥ —ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
def process_command(command, log_panel, max_log_length):
    command = command.lower().strip()  # –ü–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–æ–º–∞–Ω–¥–∏ –≤ –Ω–∏–∂–Ω—ñ–π —Ä–µ–≥—ñ—Å—Ç—Ä —ñ –≤–∏–¥–∞–ª–µ–Ω–Ω—è –∑–∞–π–≤–∏—Ö –ø—Ä–æ–±—ñ–ª—ñ–≤

    if not command:  # –Ø–∫—â–æ –∫–æ–º–∞–Ω–¥–∞ –ø—É—Å—Ç–∞
        add_to_log("‚ö†Ô∏è –í–≤–µ–¥—ñ—Ç—å –∫–æ–º–∞–Ω–¥—É –∞–±–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è!", log_panel, max_log_length, color="#FF4500")
        return

    # –°–ª–æ–≤–Ω–∏–∫ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏—Ö –∫–æ–º–∞–Ω–¥
    commands = {
        "—Ñ–∞–∫—Ç": "–§–∞–∫—Ç: –õ—é–¥–∏–Ω–∞ –º–æ–∂–µ –∂–∏—Ç–∏ –±–µ–∑ —ó–∂—ñ –¥–æ 3 —Ç–∏–∂–Ω—ñ–≤.",
        "–¥–æ–ø–æ–º–æ–≥–∞": "–ö–æ–º–∞–Ω–¥–∏: —Ñ–∞–∫—Ç, –¥–æ–ø–æ–º–æ–≥–∞, —á–∞—Å, –¥–∞—Ç–∞, –∂–∞—Ä—Ç, —Ü–∏—Ç–∞—Ç–∞, –æ—á–∏—Å—Ç–∏—Ç–∏.",
        "—á–∞—Å": f"–ü–æ—Ç–æ—á–Ω–∏–π —á–∞—Å: {datetime.now().strftime('%H:%M:%S')}",  # –ü–æ–∫–∞–∑ –ø–æ—Ç–æ—á–Ω–æ–≥–æ —á–∞—Å—É
        "–¥–∞—Ç–∞": f"–°—å–æ–≥–æ–¥–Ω—ñ—à–Ω—è –¥–∞—Ç–∞: {datetime.now().strftime('%d-%m-%Y')}",  # –ü–æ–∫–∞–∑ –ø–æ—Ç–æ—á–Ω–æ—ó –¥–∞—Ç–∏
        "–∂–∞—Ä—Ç": random.choice(jokes),  # –í–∏–±—ñ—Ä –≤–∏–ø–∞–¥–∫–æ–≤–æ–≥–æ –∂–∞—Ä—Ç—É
        "—Ü–∏—Ç–∞—Ç–∞": random.choice(quotes),  # –í–∏–±—ñ—Ä –≤–∏–ø–∞–¥–∫–æ–≤–æ—ó —Ü–∏—Ç–∞—Ç–∏
        "–æ—á–∏—Å—Ç–∏—Ç–∏": "–õ–æ–≥ –æ—á–∏—â–µ–Ω–æ."  # –û—á–∏—â–µ–Ω–Ω—è –ª–æ–≥—É
    }

    # –î–æ–¥–∞–≤–∞–Ω–Ω—è –∫–æ–º–∞–Ω–¥–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –≤ –ª–æ–≥
    add_to_log(f"–í–∏: {command}", log_panel, max_log_length, color="#FFFFFF")

    # –û–±—Ä–æ–±–∫–∞ –∫–æ–º–∞–Ω–¥–∏ "–æ—á–∏—Å—Ç–∏—Ç–∏"
    if command == "–æ—á–∏—Å—Ç–∏—Ç–∏":
        log_panel.content.controls.clear()  # –û—á–∏—â–µ–Ω–Ω—è –≤—Å—ñ—Ö –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å —É –ª–æ–≥—É
        log_panel.update()
        return

    # –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏—Ö –∫–æ–º–∞–Ω–¥
    if command in commands:
        response = commands[command]
        response_color = "#FFD700"
    # –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –º—ñ–Ω—ñ-—á–∞—Ç-–±–æ—Ç–∞
    elif command in mini_chat_responses:
        response = mini_chat_responses[command]
        response_color = "#90EE90"
    else:  # –Ø–∫—â–æ –∫–æ–º–∞–Ω–¥–∞ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–∞
        response = "‚ùå –ö–æ–º–∞–Ω–¥–∞ –Ω–µ —Ä–æ–∑–ø—ñ–∑–Ω–∞–Ω–∞. –°–ø—Ä–æ–±—É–π—Ç–µ —â–µ —Ä–∞–∑ –∞–±–æ –≤–≤–µ–¥—ñ—Ç—å '–¥–æ–ø–æ–º–æ–≥–∞'."
        response_color = "#FF4500"

    # –í–∏–≤–µ–¥–µ–Ω–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –≤ –ª–æ–≥
    add_to_log(f"–°–∏—Å—Ç–µ–º–∞: {response}", log_panel, max_log_length, color=response_color)
